name: å…è´¹è®¢é˜…æ›´æ–°

on:
  schedule:
    - cron: '0 */6 * * *'  # æ¯6å°æ—¶æ›´æ–°ä¸€æ¬¡
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: å®‰è£… Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 20

      - name: å®‰è£…ä¾èµ–
        run: npm install axios js-yaml

      - name: è¿è¡Œæ›´æ–°è„šæœ¬
        run: node tools/update.js

      - name: æäº¤å¹¶æ¨é€æ›´æ–°æ–‡ä»¶
        run: |
          git config --global user.name 'github-actions'
          git config --global user.email 'actions@github.com'
          git add public
          git commit -m "ğŸŒ€ è‡ªåŠ¨æ›´æ–°è®¢é˜…ï¼š$(date '+%F %T')" || echo "âš ï¸ æ— éœ€æäº¤"
          git push
